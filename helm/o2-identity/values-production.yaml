# Default values for o2-identity.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 2

image:
  repository: o2platform/o2-identity.web
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: "linux-v1.20.1211.22"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: true
  annotations:
    nginx.ingress.kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt
    nginx.ingress.kubernetes.io/proxy-body-size: 16m
    nginx.ingress.kubernetes.io/client-body-buffer-size: 16m
  hosts:
    - host: identity.o2bus.com
      paths: 
      - /
  tls:
    - secretName: tls-secret-identity-o2bus
      hosts:
      - identity.o2bus.com
env:
  values:
    - name: ConnectionString
      value: Server=tcp:40.88.219.28,1433;Initial Catalog=O2Bionics.O2Platform.IdentityDb;User ID=sa;Password=Pass@word;Connection Timeout=30;
    - name: DataProtection__KeyVaultKeyId
      value: https://identity.o2bus.com/keys/DataProtectionKey/bfc1bda979bc4081b89ab6f43bad12b8
    - name: DataProtection__AadTenantId
      value: f66d9d6e-883d-43f7-ba85-ba5c1c376385
    - name: DataProtection__StorageAccountName
      value: o2platform
    - name: DataProtection__StorageKeyContainerName
      value: dataprotection
    - name: DataProtection__StorageKeyBlobName
      value: keys.xml
    - name: DPConnectionString
      value: identity__keystore
    - name: MvcClient           
      value: https://shop.antonmarkov.com
    - name: BasketApi
      value: https://api-basket.o2bus.com
    - name: OrdersApi
      value: https://api-order.o2bus.com
    - name: O2BusinessSpa
      value: https://app.o2bus.com
    - name: PFRCenterSPA
      value: https://pfr-centr.com
    - name: Serilog__SeqServerUrl
      value: http://elk.o2bus.com:5340
    - name: Serilog__LogstashgUrl
      value: http://elk.o2bus.com:8080
    - name: SendGridKey
      value: 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
    - name: SendGridUser
      value: 'Support #PF_R Community'
  
resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}
